<!DOCTYPE html>
<html>
<head>
  <title>Telepresence Robot Control</title>
  <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
</head>
<body>
  <h1>Telepresence Robot Control</h1>

  <!-- Video feed from the laptop's camera -->
  <video id="localVideo" width="640" height="480" autoplay></video>

  <br>

  <!-- Robot control buttons -->
  <button onclick="sendCommand('forward')">Forward</button>
  <button onclick="sendCommand('backward')">Backward</button>
  <button onclick="sendCommand('left')">Left</button>
  <button onclick="sendCommand('right')">Right</button>

  <script>
    let localStream;

    // Function to initialize the camera feed
    async function initCamera() {
      try {
        const stream = await navigator.mediaDevices.getUserMedia({ video: true });
        const videoElement = document.getElementById('localVideo');
        videoElement.srcObject = stream;
        localStream = stream;
      } catch (error) {
        console.error('Error accessing camera:', error);
      }
    }

    // Function to send robot control commands
    function sendCommand(cmd) {
      $.get(`/command?cmd=${cmd}`, function(data) {
        console.log(`Command '${cmd}' sent: ${data}`);
      });
    }

    // Initialize the camera feed when the page loads
    $(document).ready(function() {
      initCamera();
    });
  </script>
</body>
</html>
